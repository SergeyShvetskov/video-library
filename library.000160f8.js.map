{"mappings":"oeAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,aAEmB,IAAI,EAAAC,EAAAC,SAAvB,MAGMC,EAAO,CACXC,aAAcC,SAASC,cAAc,iBACrCC,WAAYF,SAASC,cAAc,eACnCE,iBAAkBH,SAASC,cAAc,wBACzCG,YAAaJ,SAASC,cAAc,eACpCI,UAAWL,SAASC,cAAc,eAqCpC,SAASK,EAAoBC,GAC3BT,EAAKI,WAAWM,MAAMC,gBAAkB,cACxCX,EAAKI,WAAWM,MAAME,OAAS,oBAC/BZ,EAAKC,aAAaS,MAAMC,gBAAkB,UAC1CX,EAAKC,aAAaS,MAAME,OAAS,oBAEjCC,G,CAYF,SAASA,IACPb,EAAKK,iBAAiBS,UAAY,GAUlC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,aAAaC,OAAQF,GAAK,EAE5C,GAAIC,aAAaE,IAAIH,GAAGI,SAAS,WAAY,CAG3CC,EADYC,KAAKC,MAAMN,aAAaO,QAAQP,aAAaE,IAAIH,K,EAMnE,SAASS,IACPxB,EAAKK,iBAAiBS,UAAY,GAElC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,aAAaC,OAAQF,GAAK,EAE5C,GAAIC,aAAaE,IAAIH,GAAGI,SAAS,SAAU,CAGzCC,EADYC,KAAKC,MAAMN,aAAaO,QAAQP,aAAaE,IAAIH,K,EA+CnE,SAASK,GAAWK,OAClBA,EAAMC,GACNA,EAAEC,eACFA,EAAcC,YACdA,EAAWC,aACXA,EAAYC,aACZA,IAEA,MAAMC,EAAO,+BAA+BL,uFAED,EAAAM,EAAAC,YAC7BL,YACSD,sGAezB,SAAsBO,GACpB,GAAIA,EACF,OAAIA,EAAOjB,OAAS,GACXiB,EAAOC,MAAM,EAAG,IAAM,MAExBD,C,CAlBsDE,CACjDT,oDAqBMU,EAnBiCZ,EAoBjDY,EAAMpB,OAAS,EACV,GAAGoB,EAAM,GAAGC,SAASD,EAAM,GAAGC,cAMzC,SAAoBD,GAClBA,EAAME,KAAIC,GAAQA,EAAKF,OAAMG,KAAK,K,CALzBC,CAAWL,QAQFM,EA9BhBd,EA+BEc,EACKA,EAAKR,MAAM,EAAG,GAEN,yCAjCcL,EAAac,QAAQ,uEA6BtD,IAAoBD,EAZEN,EAZpBrC,EAAKK,iBAAiBwC,mBAAmB,YAAad,E,CAvJxD/B,EAAKC,aAAa6C,iBAAiB,QAAStC,GAC5CR,EAAKI,WAAW0C,iBAAiB,SA0CjC,SAAyBrC,GACvBT,EAAKC,aAAaS,MAAMC,gBAAkB,cAC1CX,EAAKC,aAAaS,MAAME,OAAS,oBACjCZ,EAAKI,WAAWM,MAAMC,gBAAkB,UACxCX,EAAKI,WAAWM,MAAME,OAAS,oBAE/BY,G,IA/CFuB,OAAOD,iBAAiB,OAAQtC,GAChCR,EAAKO,UAAUuC,iBAAiB,SAChC,SAAwBE,GACtB,IAAKhD,EAAKM,YAAY2C,UAAUC,SAAS,aAAc,CAErDhD,SAAS4C,iBAAiB,SAE1B,SAAwBrC,GAEtB,OAAQA,EAAE0C,OAAOC,WACf,IAAK,qCAIL,IAAK,wCACHvC,IACA,MAEF,IAAK,iCAIL,IAAK,oCACHW,I","sources":["src/js/library.js","src/js/filmCards-library.js"],"sourcesContent":["import './modal-team.js';\nimport './localStorage.js';\nimport './filmCards-library.js';\nimport './header-library';\n","import MovesApiService from './fetchMove';\n// import createCard from './filmCards-home';\nconst movieFetch = new MovesApiService();\nimport { posterNull } from './posterNull';\n\nconst refs = {\n  watchedBtnLb: document.querySelector('.watchedBtnLb'),\n  queueBtnLb: document.querySelector('.queueBtnLb'),\n  libraryCardsList: document.querySelector('.library-cards__list'),\n  modalWindow: document.querySelector('[data-modal'),\n  movieList: document.querySelector('#card-list'),\n};\n\nrefs.watchedBtnLb.addEventListener('click', onWatchedBtnLbClick);\nrefs.queueBtnLb.addEventListener('click', onQueueBtnClick);\nwindow.addEventListener('load', onWatchedBtnLbClick);\nrefs.movieList.addEventListener('click', onClickLibCard);\nfunction onClickLibCard(e) {\n  if (!refs.modalWindow.classList.contains('is-hidden')) {\n    // console.log('MODAL-OPEN');\n    document.addEventListener('click', updateCardList);\n\n    function updateCardList(e) {\n      // console.log(e.target);\n      switch (e.target.className) {\n        case 'modal-form-watched-bnt add-watched':\n          createWatchedList();\n          break;\n\n        case 'modal-form-watched-bnt remove-watched':\n          createWatchedList();\n          break;\n\n        case 'modal-form-queue-bnt add-queue':\n          createQueueList();\n          break;\n\n        case 'modal-form-queue-bnt remove-queue':\n          createQueueList();\n          break;\n\n        default:\n      }\n    }\n  }\n}\n\nfunction onWatchedBtnLbClick(e) {\n  refs.queueBtnLb.style.backgroundColor = 'transparent';\n  refs.queueBtnLb.style.border = '1px solid #FFFFFF';\n  refs.watchedBtnLb.style.backgroundColor = '#ff6b01';\n  refs.watchedBtnLb.style.border = '1px solid #ff6b01';\n  //   createWathedGalery();\n  createWatchedList();\n}\n\nfunction onQueueBtnClick(e) {\n  refs.watchedBtnLb.style.backgroundColor = 'transparent';\n  refs.watchedBtnLb.style.border = '1px solid #FFFFFF';\n  refs.queueBtnLb.style.backgroundColor = '#ff6b01';\n  refs.queueBtnLb.style.border = '1px solid #ff6b01';\n\n  createQueueList();\n}\n\nfunction createWatchedList() {\n  refs.libraryCardsList.innerHTML = '';\n\n  // if (!(localStorage.getItem('idWatched'))) {return}\n  // const idWatchedArray = JSON.parse((localStorage.getItem('idWatched')))\n  // // console.log(idWatchedArray)\n  // // for (let j = 0; i < idWatchedArray.length; j += 1)\n  // for (let i in idWatchedArray) {\n  // console.log(j, idWatchedArray[j])\n  // }\n\n  for (let i = 0; i < localStorage.length; i += 1) {\n    // console.log(localStorage.length);\n    if (localStorage.key(i).includes('watched')) {\n      // console.log(localStorage.getItem(localStorage.key(i)));\n      let movie = JSON.parse(localStorage.getItem(localStorage.key(i)));\n      createCard(movie);\n    }\n  }\n}\n\nfunction createQueueList() {\n  refs.libraryCardsList.innerHTML = '';\n\n  for (let i = 0; i < localStorage.length; i += 1) {\n    // console.log(localStorage.length);\n    if (localStorage.key(i).includes('queue')) {\n      // console.log(localStorage.getItem(localStorage.key(i)));\n      let movie = JSON.parse(localStorage.getItem(localStorage.key(i)));\n      createCard(movie);\n    }\n  }\n\n  // if (!localStorage.getItem('idQueue')) {\n  //   return;\n  // }\n  // const idQueueArray = JSON.parse(localStorage.getItem('idQueue'));\n  // // console.log(idQueueArray)\n  // // for (let j = 0; i < idQueueArray.length; j += 1)\n  // for (let i in idQueueArray) {\n  // console.log(j, idQueueArray[j])\n  // }\n\n  // for (let i = 0; i < localStorage.length; i += 1) {\n  // console.log(localStorage.length);\n  // if (localStorage.key(i).includes('queue')) {\n  // console.log(localStorage.getItem(localStorage.key(i)));\n  // const movieId = JSON.parse(localStorage.getItem(localStorage.key(i)));\n  // movieFetch.id = movieId;\n  // movieFetch.id = idQueueArray[i];\n  // movieFetch\n  //   .fetchMoviesInfo()\n  //   .then(\n  //     ({\n  //       genres,\n  //       id,\n  //       original_title,\n  //       poster_path,\n  //       release_date,\n  //       vote_average,\n  //     }) => {\n  //       createCard({\n  //         genres,\n  //         id,\n  //         original_title,\n  //         poster_path,\n  //         release_date,\n  //         vote_average,\n  //       });\n  //     }\n  //   );\n  // }\n  // }\n}\n\nfunction createCard({\n  genres,\n  id,\n  original_title,\n  poster_path,\n  release_date,\n  vote_average,\n}) {\n  const card = `<li class=\"cards__item\" id=\"${id}\">\n          <a class=\"cards__link\">\n              <img class=\"cards__img\" src=\"${posterNull(\n                poster_path\n              )}\" alt=\"${original_title}\" loading=\"lazy\">\n          </a>\n              <div class=\"cards__text\"><h2 class=\"cards__name\">${getShortName(\n                original_title\n              )}</h2>\n              <p class=\"cards__genres\"> ${changeGanres(genres)} | ${createYear(\n    release_date\n  )}<span class=\"film-rating\"> ${vote_average.toFixed(1)}</span>\n              </p>\n              </div>\n          </li>`;\n\n  refs.libraryCardsList.insertAdjacentHTML('beforeend', card);\n}\n\nfunction getShortName(string) {\n  if (string) {\n    if (string.length > 32) {\n      return string.slice(0, 32) + '...';\n    }\n    return string;\n  }\n}\n\nfunction changeGanres(array) {\n  if (array.length > 2) {\n    return `${array[0].name}, ${array[1].name}, other`;\n  } else {\n    return showGanres(array);\n  }\n}\n\nfunction showGanres(array) {\n  array.map(item => item.name).join(', ');\n}\n\nfunction createYear(data) {\n  if (data) {\n    return data.slice(0, 4);\n  } else {\n    return (data = 'Not found');\n  }\n}\n"],"names":["parcelRequire","$koHy7","default","$e22a8b59918c3f3c$var$refs","watchedBtnLb","document","querySelector","queueBtnLb","libraryCardsList","modalWindow","movieList","$e22a8b59918c3f3c$var$onWatchedBtnLbClick","e","style","backgroundColor","border","$e22a8b59918c3f3c$var$createWatchedList","innerHTML","i","localStorage","length","key","includes","$e22a8b59918c3f3c$var$createCard","JSON","parse","getItem","$e22a8b59918c3f3c$var$createQueueList","genres","id","original_title","poster_path","release_date","vote_average","card","$emrjP","posterNull","string","slice","$e22a8b59918c3f3c$var$getShortName","array","name","map","item","join","$e22a8b59918c3f3c$var$showGanres","data","toFixed","insertAdjacentHTML","addEventListener","window","e1","classList","contains","target","className"],"version":3,"file":"library.000160f8.js.map"}